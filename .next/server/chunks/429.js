"use strict";exports.id=429,exports.ids=[429],exports.modules={23429:(e,t,n)=>{let r;n.d(t,{Jt:()=>rm,Wi:()=>rx});var a=n(45512);let s=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,a){return arguments.length>=4?t(e,n,r,a):function(a){return t(a,e,n,r)}};case 5:return function(e,n,r,a,s){return arguments.length>=5?t(e,n,r,a,s):function(s){return t(s,e,n,r,a)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let n=arguments;return function(e){return t(e,...n)}}}},i=e=>e,o=(r=void 0,()=>r),u=Symbol.for("effect/GlobalValue/globalStoreId/3.11.5");u in globalThis||(globalThis[u]=new Map);let c=globalThis[u],l=(e,t)=>(c.has(e)||c.set(e,t()),c.get(e)),d=e=>"string"==typeof e,p=e=>"number"==typeof e,f=e=>"function"==typeof e,h=e=>"object"==typeof e&&null!==e,g=e=>h(e)||f(e),m=s(2,(e,t)=>g(e)&&t in e),x=s(2,(e,t)=>m(e,"_tag")&&e._tag===t),v=e=>h(e)&&!Array.isArray(e),b=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class y{constructor(e){this.called=!1,this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new y(this.self)}}let w=Symbol.for("effect/Utils/YieldWrap");class _{#e;constructor(e){this.#e=e}[w](){return this.#e}}let j=l("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),k=l(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),E=Symbol.for("effect/Hash"),S=e=>{if(!0===j.enabled)return 0;switch(typeof e){case"number":return N(e);case"bigint":return T(e.toString(10));case"boolean":case"symbol":return T(String(e));case"string":return T(e);case"undefined":return T("undefined");case"function":case"object":if(null===e)return T("null");if(e instanceof Date)return S(e.toISOString());if(A(e))return e[E]();return O(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},O=e=>(k.has(e)||k.set(e,N(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),k.get(e)),C=e=>t=>53*t^e,R=e=>0xbfffffff&e|e>>>1&0x40000000,A=e=>m(e,E),N=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=0xffffffff*e);e>0xffffffff;)t^=e/=0xffffffff;return R(t)},T=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return R(t)},I=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=function(e,t,n,r,a,s,i,o,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return s(a(r(n(t(e)))));case 7:return i(s(a(r(n(t(e))))));case 8:return o(i(s(a(r(n(t(e)))))));case 9:return u(o(i(s(a(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}(T(t[r]),C(S(e[t[r]])));return R(n)},U=e=>I(e,Object.keys(e)),M=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,E,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,E,{value:()=>t,enumerable:!1}),t},F=Symbol.for("effect/Equal");function L(){return 1==arguments.length?e=>$(e,arguments[0]):$(arguments[0],arguments[1])}function $(e,t){if(e===t)return!0;let n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(z(e)&&z(t))return!!(S(e)===S(t)&&e[F](t))||!!j.enabled&&!!j.tester&&j.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(j.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>$(e,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(let r of n)if(!(r in t&&$(e[r],t[r])))return!!j.tester&&j.tester(e,t);return!0}}return!!j.tester&&j.tester(e,t)}}return!!j.enabled&&!!j.tester&&j.tester(e,t)}let z=e=>m(e,F),D=Symbol.for("nodejs.util.inspect.custom"),P=e=>{try{if(m(e,"toJSON")&&f(e.toJSON)&&0===e.toJSON.length)return e.toJSON();if(Array.isArray(e))return e.map(P)}catch(e){return{}}return Y(e)},B=e=>JSON.stringify(e,null,2),H=(e,t=2)=>{if("string"==typeof e)return e;try{return"object"==typeof e?J(e,t):String(e)}catch(t){return String(e)}},J=(e,t)=>{let n=[],r=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&(void 0!==W.fiberRefs&&q(t)?t[V](W.fiberRefs):t):t,t);return n=void 0,r},V=Symbol.for("effect/Inspectable/Redactable"),q=e=>"object"==typeof e&&null!==e&&V in e,W=l("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),Y=e=>q(e)&&void 0!==W.fiberRefs?e[V](W.fiberRefs):e,G=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}},X=Symbol.for("effect/Effect"),Z=Symbol.for("effect/Stream"),K=Symbol.for("effect/Sink"),Q=Symbol.for("effect/Channel"),ee={_R:e=>e,_E:e=>e,_A:e=>e,_V:"3.11.5"},et={[X]:ee,[Z]:ee,[K]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[Q]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[F](e){return this===e},[E](){return M(this,O(this))},[Symbol.iterator](){return new y(new _(this))},pipe(){return G(this,arguments)}},en={[E](){return M(this,U(this))},[F](e){let t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(let n of t)if(!(n in e&&L(this[n],e[n])))return!1;return!0}},er=Symbol.for("effect/Option"),ea={...et,[er]:{_A:e=>e},[D](){return this.toJSON()},toString(){return B(this.toJSON())}},es=S("None"),ei=Object.assign(Object.create(ea),{_tag:"None",_op:"None",[F]:e=>eo(e)&&eu(e),[E]:()=>es,toJSON(){return{_id:"Option",_tag:this._tag}}}),eo=e=>m(e,er),eu=e=>"None"===e._tag,ec=e=>"Some"===e._tag,el=Symbol.for("effect/Either");Symbol.iterator,()=>ed;let ed={next:()=>({done:!0,value:void 0})};Object.fromEntries,(e,t)=>{let n=[];for(let r of ep(e))n.push(t(r,e[r]));return n};let ep=e=>Object.keys(e),ef=e=>Array.isArray(e)?e:Array.from(e),eh=e=>Array.isArray(e)?e:[e],eg=Symbol.for("effect/Context/Tag"),em=Symbol.for("effect/Context/Reference"),ex=Symbol.for("effect/STM"),ev={...et,_op:"Tag",[ex]:ee,[eg]:{_Service:e=>e,_Identifier:e=>e},toString(){return B(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[D](){return this.toJSON()},of:e=>e,context(e){return eE(this,e)}},eb={...ev,[em]:em},ey=Symbol.for("effect/Context"),ew={[ey]:{_Services:e=>e},[F](e){if(ek(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!L(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[E](){return M(this,N(this.unsafeMap.size))},pipe(){return G(this,arguments)},toString(){return B(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(P)}},[D](){return this.toJSON()}},e_=e=>{let t=Object.create(ew);return t.unsafeMap=e,t},ej=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let n=e.stack.split("\n");if(n.length>2){let e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},ek=e=>m(e,ey),eE=(e,t)=>e_(new Map([[e.key,t]])),eS=s(3,(e,t,n)=>{let r=new Map(e.unsafeMap);return r.set(t.key,n),e_(r)}),eO=l("effect/Context/defaultValueCache",()=>new Map),eC=e=>{if(eO.has(e.key))return eO.get(e.key);let t=e.defaultValue();return eO.set(e.key,t),t},eR=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):eC(t),eA=s(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(em in t)return eC(t);throw ej(t)}return e.unsafeMap.get(t.key)}),eN=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,ev),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},eT=()=>(e,t)=>{let n=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=Error();function a(){}return Error.stackTraceLimit=n,Object.setPrototypeOf(a,eb),a.key=e,a.defaultValue=t.defaultValue,Object.defineProperty(a,"stack",{get:()=>r.stack}),a},eI=Symbol.for("effect/Micro"),eU=Symbol.for("effect/Micro/MicroExit"),eM=e=>"object"==typeof e&&null!==e&&eI in e,eF=Symbol.for("effect/Micro/MicroCause"),eL={_E:i};class e$ extends globalThis.Error{constructor(e,t,n){let r,a,s;let i=`MicroCause.${e}`;if(t instanceof globalThis.Error){r=`(${i}) ${t.name}`;let e=(a=t.message).split("\n").length;s=t.stack?`(${i}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${r}: ${a}`}else r=i,a=H(t,0),s=`${r}: ${a}`;n.length>0&&(s+=`
    ${n.join("\n    ")}`),super(a),this._tag=e,this.traces=n,this[eF]=eL,this.name=r,this.stack=s}pipe(){return G(this,arguments)}toString(){return this.stack}[D](){return this.stack}}class ez extends e${constructor(e,t=[]){super("Fail",e,t),this.error=e}}let eD=(e,t=[])=>new ez(e,t);class eP extends e${constructor(e,t=[]){super("Die",e,t),this.defect=e}}let eB=(e,t=[])=>new eP(e,t);class eH extends e${constructor(e=[]){super("Interrupt","interrupted",e)}}let eJ=(e=[])=>new eH(e),eV=e=>"Fail"===e._tag,eq=e=>"Interrupt"===e._tag,eW=e=>"Fail"===e._tag?e.error:"Die"===e._tag?e.defect:e,eY=s(2,(e,t)=>{let n=[...e.traces,t];switch(e._tag){case"Die":return eB(e.defect,n);case"Interrupt":return eJ(n);case"Fail":return eD(e.error,n)}}),eG=Symbol.for("effect/Micro/MicroFiber"),eX={_A:i,_E:i};class eZ{constructor(e,t=!0){this._stack=[],this._observers=[],this.currentOpCount=0,this._interrupted=!1,this._yielded=void 0,this.context=e,this.interruptible=t,this[eG]=eX}getRef(e){return eR(this.context,e)}addObserver(e){return this._exit?(e(this._exit),o):(this._observers.push(e),()=>{let t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)})}unsafeInterrupt(){!this._exit&&(this._interrupted=!0,this.interruptible&&this.evaluate(tR))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(void 0!==this._yielded){let e=this._yielded;this._yielded=void 0,e()}let t=this.runLoop(e);if(t===e6)return;let n=eK.interruptChildren&&eK.interruptChildren(this);if(void 0!==n)return this.evaluate(tj(n,()=>t));this._exit=t;for(let e=0;e<this._observers.length;e++)this._observers[e](t);this._observers.length=0}runLoop(e){let t=!1,n=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!t&&this.getRef(tP).shouldYield(this)){t=!0;let e=n;n=tj(to,()=>e)}if((n=n[e2](this))===e6){let e=this._yielded;if(eU in e)return this._yielded=void 0,e;return e6}}}catch(e){if(!m(n,e2))return tA(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`);return tA(e)}}getCont(e){for(;;){let t=this._stack.pop();if(!t)return;let n=t[e5]&&t[e5](this);if(n)return{[e]:n};if(t[e])return t}}yieldWith(e){return this._yielded=e,e6}children(){return this._children??=new Set}}let eK=l("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),eQ=e=>ti(()=>{for(let t of e)t.unsafeInterrupt();let t=e[Symbol.iterator](),n=ti(()=>{let e=t.next();for(;!e.done;){if(e.value.unsafePoll()){e=t.next();continue}let r=e.value;return tm(e=>{r.addObserver(t=>{e(n)})})}return tT});return n}),e0=Symbol.for("effect/Micro/identifier"),e1=Symbol.for("effect/Micro/args"),e2=Symbol.for("effect/Micro/evaluate"),e4=Symbol.for("effect/Micro/successCont"),e3=Symbol.for("effect/Micro/failureCont"),e5=Symbol.for("effect/Micro/ensureCont"),e6=Symbol.for("effect/Micro/Yield"),e7={...et,_op:"Micro",[eI]:{_A:i,_E:i,_R:i},pipe(){return G(this,arguments)},[Symbol.iterator](){return new y(new _(this))},toJSON(){return{_id:"Micro",op:this[e0],...e1 in this?{args:this[e1]}:void 0}},toString(){return B(this)},[D](){return B(this)}};function e8(e){return tA("Micro.evaluate: Not implemented")}let e9=e=>({...e7,[e0]:e.op,[e2]:e.eval??e8,[e4]:e.contA,[e3]:e.contE,[e5]:e.ensure}),te=e=>{let t=e9(e);return function(){let n=Object.create(t);return n[e1]=!1===e.single?arguments:arguments[0],n}},tt=e=>{let t={...e9(e),[eU]:eU,_tag:e.op,get[e.prop](){return this[e1]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[e1]}},[F](t){return tS(t)&&t._tag===e.op&&L(this[e1],t[e1])},[E](){return M(this,C(T(e.op))(S(this[e1])))}};return function(e){let n=Object.create(t);return n[e1]=e,n[e4]=void 0,n[e3]=void 0,n[e5]=void 0,n}},tn=tt({op:"Success",prop:"value",eval(e){let t=e.getCont(e4);return t?t[e4](this[e1],e):e.yieldWith(this)}}),tr=tt({op:"Failure",prop:"cause",eval(e){let t=e.getCont(e3);for(;eq(this[e1])&&t&&e.interruptible;)t=e.getCont(e3);return t?t[e3](this[e1],e):e.yieldWith(this)}}),ta=e=>tr(eD(e)),ts=te({op:"Sync",eval(e){let t=this[e1](),n=e.getCont(e4);return n?n[e4](t,e):e.yieldWith(tO(t))}}),ti=te({op:"Suspend",eval(e){return this[e1]()}}),to=te({op:"Yield",eval(e){let t=!1;return e.getRef(tP).scheduleTask(()=>{t||e.evaluate(tT)},this[e1]??0),e.yieldWith(()=>{t=!0})}})(0),tu=e=>tA(e),tc=tn(void 0),tl=e=>ti(()=>{try{return tn(e.try())}catch(t){return ta(e.catch(t))}}),td=e=>th(function(t,n){e(n).then(e=>t(tn(e)),e=>t(tu(e)))},0!==e.length),tp=e=>th(function(t,n){try{e.try(n).then(e=>t(tn(e)),n=>t(ta(e.catch(n))))}catch(n){t(ta(e.catch(n)))}},0!==e.try.length),tf=te({op:"WithMicroFiber",eval(e){return this[e1](e)}}),th=te({op:"Async",single:!1,eval(e){let t=this[e1][0],n=!1,r=!1,a=this[e1][1]?new AbortController:void 0,s=t(t=>{n||(n=!0,r?e.evaluate(t):r=t)},a?.signal);return!1!==r?r:(r=!0,e._yielded=()=>{n=!0},void 0===a&&void 0===s||e._stack.push(tg(()=>(n=!0,a?.abort(),s??tT))),e6)}}),tg=te({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(t3(!0)))},contE(e,t){return eq(e)?tj(this[e1](),()=>tr(e)):tr(e)}}),tm=e=>th(e,e.length>=2),tx=(...e)=>ti(()=>tv(1===e.length?e[0]():e[1].call(e[0]))),tv=te({op:"Iterator",contA(e,t){let n=this[e1].next(e);return n.done?tn(n.value):(t._stack.push(this),function(e){if("object"==typeof e&&null!==e&&w in e)return e[w]();throw Error(b("yieldWrapGet"))}(n.value))},eval(e){return this[e4](void 0,e)}}),tb=s(2,(e,t)=>tE(e,e=>t)),ty=s(2,(e,t)=>tj(e,e=>{let n=eM(t)?t:"function"==typeof t?t(e):t;return eM(n)?n:tn(n)})),tw=s(2,(e,t)=>tj(e,e=>{let n=eM(t)?t:"function"==typeof t?t(e):t;return eM(n)?tb(n,e):tn(e)})),t_=e=>tQ(e,{onFailure:tC,onSuccess:tO}),tj=s(2,(e,t)=>{let n=Object.create(tk);return n[e1]=e,n[e4]=t,n}),tk=e9({op:"OnSuccess",eval(e){return e._stack.push(this),this[e1]}}),tE=s(2,(e,t)=>tj(e,e=>tn(t(e)))),tS=e=>m(e,eU),tO=tn,tC=tr,tR=tC(eJ()),tA=e=>tC(eB(e)),tN=e=>"Failure"===e._tag,tT=tO(void 0),tI=e=>{for(let t of e)if("Failure"===t._tag)return t;return tT},tU="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class tM{scheduleTask(e,t){this.tasks.push(e),this.running||(this.running=!0,tU(this.afterScheduled))}runTasks(){let e=this.tasks;this.tasks=[];for(let t=0,n=e.length;t<n;t++)e[t]()}shouldYield(e){return e.currentOpCount>=e.getRef(tz)}flush(){for(;this.tasks.length>0;)this.runTasks()}constructor(){this.tasks=[],this.running=!1,this.afterScheduled=()=>{this.running=!1,this.runTasks()}}}let tF=e=>tf(t=>tn(eA(t.context,e))),tL=s(2,(e,t)=>tf(n=>{let r=n.context;return n.context=t(r),t1(e,()=>(n.context=r,tc))})),t$=s(3,(e,t,n)=>tL(e,eS(t,n)));class tz extends eT()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class tD extends eT()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){}class tP extends eT()("effect/Micro/currentScheduler",{defaultValue:()=>new tM}){}let tB=s(e=>eM(e[0]),(e,t,n)=>tj(e,e=>t(e)?tn(e):ta(n(e)))),tH=s(2,(e,t)=>{let n=Object.create(tJ);return n[e1]=e,n[e3]=t,n}),tJ=e9({op:"OnFailure",eval(e){return e._stack.push(this),this[e1]}}),tV=s(3,(e,t,n)=>tH(e,e=>t(e)?n(e):tr(e))),tq=s(3,(e,t,n)=>tV(e,t,e=>ty(n(e),tr(e)))),tW=s(2,(e,t)=>tq(e,eV,e=>t(e.error))),tY=s(3,(e,t,n)=>tV(e,e=>eV(e)&&t(e.error),e=>n(e.error))),tG=s(3,(e,t,n)=>tY(e,x(t),n)),tX=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let n=e=>n=>t4(n,n=>tr(function(e,n){let r=t.stack;if(!r)return n;let a=r.split("\n")[2]?.trim().replace(/^at /,"");if(!a)return n;let s=a.match(/\((.*)\)$/);return eY(n,`at ${e} (${s?s[1]:a})`)}(e,n)));return 2==arguments.length?n(arguments[1])(arguments[0]):n(arguments[0])},tZ=s(2,(e,t)=>{let n=Object.create(tK);return n[e1]=e,n[e4]=t.onSuccess,n[e3]=t.onFailure,n}),tK=e9({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[e1]}}),tQ=null;class t0{constructor(){this.state={_tag:"Open",finalizers:new Set},this[null]=null}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return ti(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),tc):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return ti(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},tj(t8(t,t=>t_(t(e))),tI)}return tc})}get fork(){return ts(()=>{let e=new t0;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>ts(()=>this.unsafeRemoveFinalizer(t))),e})}}let t1=s(2,(e,t)=>t6(n=>tZ(n(e),{onFailure:e=>tj(t(tC(e)),()=>tr(e)),onSuccess:e=>tj(t(tO(e)),()=>tn(e))}))),t2=s(3,(e,t,n)=>t1(e,e=>t(e)?n(e):tT)),t4=s(2,(e,t)=>t2(e,tN,e=>t(e.cause))),t3=te({op:"SetInterruptible",ensure(e){if(e.interruptible=this[e1],e._interrupted&&e.interruptible)return()=>tR}}),t5=e=>tf(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(t3(!1)),t._interrupted)?tR:e),t6=e=>tf(t=>t.interruptible?(t.interruptible=!1,t._stack.push(t3(!0)),e(t5)):e(i)),t7=te({op:"While",contA(e,t){return(this[e1].step(e),this[e1].while())?(t._stack.push(this),this[e1].body()):tT},eval(e){return this[e1].while()?(e._stack.push(this),this[e1].body()):tT}}),t8=(e,t,n)=>tf(r=>{let a=n?.concurrency==="inherit"?r.getRef(tD):n?.concurrency??1,s="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),i=ef(e),o=i.length;if(0===o)return n?.discard?tc:tn([]);let u=n?.discard?void 0:Array(o),c=0;return 1===s?tb(t7({while:()=>c<i.length,body:()=>t(i[c],c),step:u?e=>u[c++]=e:e=>c++}),u):tm(e=>{let n;let a=new Set,l=0,d=0,p=!1,f=!1;return function h(){for(p=!0;l<s&&c<o;){let g=c,m=i[g];c++,l++;try{let i=t9(r,t(m,g),!0,!0);a.add(i),i.addObserver(t=>{a.delete(i),f||("Failure"===t._tag?void 0===n&&(n=t,o=c,a.forEach(e=>e.unsafeInterrupt())):void 0!==u&&(u[g]=t.value),d++,l--,d===o?e(n??tn(u)):!p&&l<s&&h())})}catch(e){n=tA(e),o=c,a.forEach(e=>e.unsafeInterrupt())}}p=!1}(),ti(()=>(f=!0,c=o,eQ(a)))})}),t9=(e,t,n=!1,r=!1)=>{let a=new eZ(e.context,e.interruptible);return r||(e.children().add(a),a.addObserver(()=>e.children().delete(a))),n?a.evaluate(t):e.getRef(tP).scheduleTask(()=>a.evaluate(t),0),a},ne=(e,t)=>{let n=new eZ(tP.context(t?.scheduler??new tM));if(n.evaluate(e),t?.signal){if(t.signal.aborted)n.unsafeInterrupt();else{let e=()=>n.unsafeInterrupt();t.signal.addEventListener("abort",e,{once:!0}),n.addObserver(()=>t.signal.removeEventListener("abort",e))}}return n},nt=(e,t)=>new Promise((n,r)=>{ne(e,t).addObserver(n)}),nn=(e,t)=>nt(e,t).then(e=>{if("Failure"===e._tag)throw e.cause;return e.value}),nr=e=>{let t=new tM,n=ne(e,{scheduler:t});return t.flush(),n._exit??tA(n)},na=e=>{let t=nr(e);if("Failure"===t._tag)throw t.cause;return t.value},ns=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,e7,en,{[e0]:"Failure",[e2](){return ta(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[D](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}),e}(),ni=class extends ns{constructor(e){super(),e&&Object.assign(this,e)}},no=e=>{class t extends ni{constructor(...t){super(...t),this._tag=e}}return t.prototype.name=e,t},nu={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}},nc={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}},nl={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}},nd={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};class np extends no("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class nf extends no("FetchError"){}class nh extends no("InvalidJson"){}class ng extends no("BadRequestError"){getMessage(){return v(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}class nm extends no("UploadAborted"){}class nx extends no("UploadAborted"){}function nv(e){return Object.keys(e)}function nb(e,t,n){!function(e,t){let n=/(\d+)\.?(\d+)?\.?(\d+)?/,r=e.match(n);if(!r?.[0])throw Error(`Invalid semver requirement: ${e}`);let a=t.match(n);if(!a?.[0])throw Error(`Invalid semver to check: ${t}`);let[s,i,o,u]=r,[c,l,d,p]=a;return e.startsWith("^")?i===l&&!(o>d):e.startsWith("~")?i===l&&o===d:i===l&&o===d&&u===p}(t,n)&&console.warn(`!!!WARNING::: ${e} requires "uploadthing@${t}", but version "${n}" is installed`)}let ny=e=>tx(function*(){let t="undefined"!=typeof window?window.location.origin:process.env?.VERCEL_URL?`https://${process.env.VERCEL_URL}`:"http://localhost:3000",n=yield*tl({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new np(e??"/api/uploadthing")});return"/"===n.pathname&&(n.pathname="/api/uploadthing"),n}),nw=e=>e instanceof URL?e:na(ny(e));function n_(){}let nj={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,INVALID_SERVER_CONFIG:500,FILE_LIMIT_EXCEEDED:500};class nk extends ni{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:v(t.cause)&&p(t.cause.status)&&d(t.cause.statusText)?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):d(t.cause)?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nk.toObject(e))}}let nE=e=>new nk({code:"INTERNAL_CLIENT_ERROR",message:"Something went wrong. Please report this to UploadThing.",cause:e});class nS extends eN("uploadthing/Fetch")(){}let nO=(e,t)=>tj(tF(nS),n=>{let r=new Headers(t?.headers??[]),a={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(r)};return tp({try:a=>n(e,{...t,headers:r,signal:a}),catch:e=>new nf({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:a})}).pipe(tW(e=>ts(()=>console.error(e.input))),tE(e=>Object.assign(e,{requestUrl:a.url})),tX("fetch"))}),nC=e=>tp({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new nh({error:t,input:e.requestUrl})}).pipe(tB(({ok:e})=>e,({json:t,status:n})=>new ng({status:n,message:`Request to ${e.requestUrl} failed with status ${n}`,json:t})),tE(({json:e})=>e),tX("parseJson")),nR=e=>{let t=Array.isArray(e)?e:nv(e);return t.includes("blob")?[]:t.map(e=>"pdf"===e?"application/pdf":e.includes("/")?e:"audio"===e?["audio/*",...nv(nu)].join(", "):"image"===e?["image/*",...nv(nc)].join(", "):"text"===e?["text/*",...nv(nl)].join(", "):"video"===e?["video/*",...nv(nd)].join(", "):`${e}/*`)},nA=e=>Object.fromEntries(nR(e).map(e=>[e,[]]));function nN(e){let t=e.clipboardData?.items;if(t)return Array.from(t).reduce((e,t)=>{let n=t.getAsFile();return n?[...e,n]:e},[])}let nT=e=>({fileTypes:e?nv(e):[],multiple:(e?Object.values(e).map(e=>e.maxFileCount):[]).some(e=>e&&e>1)}),nI=e=>e.charAt(0).toUpperCase()+e.slice(1),nU=e=>{if(!e)return"";let t=nv(e),n=t.map(e=>"blob"===e?"file":e);if(n.length>1){let e=n.pop();return`${n.join("s, ")} and ${e}s`}let r=t[0],a=n[0],{maxFileSize:s,maxFileCount:i,minFileCount:o}=e[r];return i&&i>1?o>1?`${o} - ${i} ${a}s up to ${s}`:`${a}s up to ${s}, max ${i}`:`${a} (${s})`},nM=e=>nI(nU(e)),nF=(e,t)=>{if("string"==typeof e)return e;if("function"==typeof e){let n=e(t);if("string"==typeof n)return n}return""},nL=(e,t)=>{if("object"==typeof e)return e;if("function"==typeof e){let n=e(t);if("object"==typeof n)return n}return{}},n$=(e,t)=>e?"function"!=typeof e?e:"function"==typeof e?e(t):void 0:null,nz=(...e)=>e.filter(Boolean).join(" ");function nD(e,t){return"application/x-moz-file"===e.type||function(e,t){if(e&&t){let n=Array.isArray(t)?t:t.split(","),r=e.name??"",a=(e.type??"").toLowerCase(),s=a.replace(/\/.*$/,"");return n.some(e=>{let t=e.trim().toLowerCase();return t.startsWith(".")?r.toLowerCase().endsWith(t):t.endsWith("/*")?s===t.replace(/\/.*$/,""):a===t})}return!0}(e,t)}new TextEncoder;let nP=e=>null!=e;function nB(e,t,n){return!nP(e.size)||(nP(t)&&nP(n)?e.size>=t&&e.size<=n:!(nP(t)&&e.size<t||nP(n)&&e.size>n))}function nH(e,t,n){return(!!t||!(e.length>1))&&(!t||!(n>=1)||!(e.length>n))}function nJ(e){return"dataTransfer"in e&&null!==e.dataTransfer?Array.prototype.some.call(e.dataTransfer?.types,e=>"Files"===e||"application/x-moz-file"===e):!!e.target&&"files"in e.target&&!!e.target.files}let nV={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[]};function nq(e,t){switch(t.type){case"focus":return{...e,isFocused:!0};case"blur":return{...e,isFocused:!1};case"openDialog":return{...nV,isFileDialogActive:!0};case"closeDialog":return{...e,isFileDialogActive:!1};case"setDraggedFiles":case"setFiles":return{...e,...t.payload};case"reset":return nV;default:return e}}var nW="7.4.4";let nY=()=>{let e,t;let n=new AbortController;return{promise:new Promise((n,r)=>{e=n,t=r}),ac:n,resolve:e,reject:t}},nG=e=>{let t=new URL(e.url),n=new URLSearchParams(t.search);return n.set("actionType",e.actionType),n.set("slug",e.slug),t.search=n.toString(),t},nX=e=>(t,n)=>tx(function*(){let r=nG({url:e.url,slug:e.endpoint,actionType:t}),a=new Headers((yield*td(async()=>"function"==typeof e.headers?await e.headers():e.headers)));return a.set("x-uploadthing-package",e.package),a.set("x-uploadthing-version",nW),a.set("Content-Type","application/json"),yield*nO(r,{method:"POST",body:JSON.stringify(n),headers:a}).pipe(ty(nC),tE(i),tG("FetchError",e=>ta(new nk({code:"INTERNAL_CLIENT_ERROR",message:`Failed to report event "${t}" to UploadThing server`,cause:e}))),tG("BadRequestError",e=>ta(new nk({code:function(e){for(let[t,n]of Object.entries(nj))if(n===e)return t;return"INTERNAL_SERVER_ERROR"}(e.status),message:e.getMessage(),cause:e.json}))),tG("InvalidJson",e=>ta(new nk({code:"INTERNAL_CLIENT_ERROR",message:"Failed to parse response from UploadThing server",cause:e}))))}),nZ=(e,t,n,r)=>tm(a=>{let s=new XMLHttpRequest;s.open("PUT",n.url,!0),s.setRequestHeader("Range",`bytes=${t}-`),s.setRequestHeader("x-uploadthing-version",nW),s.responseType="json";let i=0;s.upload.addEventListener("progress",({loaded:e})=>{let t=e-i;r?.({loaded:e,delta:t}),i=e}),s.addEventListener("load",()=>{a(s.status>=200&&s.status<300?tn(s.response):tu(`XHR failed ${s.status} ${s.statusText} - ${JSON.stringify(s.response)}`))}),s.addEventListener("error",()=>{a(new nk({code:"UPLOAD_FAILED"}))});let o=new FormData;return o.append("file",t>0?e.slice(t):e),s.send(o),ts(()=>s.abort())}),nK=(e,t,n)=>nO(t.url,{method:"HEAD"}).pipe(tE(({headers:e})=>parseInt(e.get("x-ut-range-start")??"0",10)),tw(e=>n.onUploadProgress?.({delta:e,loaded:e})),tj(r=>nZ(e,r,t,e=>n.onUploadProgress?.({delta:e.delta,loaded:e.loaded+r}))),tE(i),tE(n=>({name:e.name,size:e.size,key:t.key,lastModified:e.lastModified,serverData:n.serverData,url:n.url,appUrl:n.appUrl,customId:t.customId,type:e.type,fileHash:n.fileHash}))),nQ=(e,t)=>{let n=nX({endpoint:String(e),package:t.package,url:t.url,headers:t.headers}),r=t.files.reduce((e,t)=>e+t.size,0),a=0;return n("upload",{input:"input"in t?t.input:null,files:t.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}).pipe(tj(e=>t8(e,(e,n)=>tj(ts(()=>t.onUploadBegin?.({file:t.files[n].name})),()=>nK(t.files[n],e,{onUploadProgress:e=>{a+=e.delta,t.onUploadProgress?.({file:t.files[n],progress:Math.round(e.loaded/t.files[n].size*100),loaded:e.loaded,delta:e.delta,totalLoaded:a,totalProgress:Math.round(a/r*100)})}})),{concurrency:6})),t$(nS,window.fetch))},n0=e=>{let t=new Proxy(n_,{get:(e,t)=>t});return{uploadFiles:(n,r)=>nQ("function"==typeof n?n(t):n,{...r,skipPolling:{},url:nw(e?.url),package:e.package,input:r.input}).pipe(e=>nt(e,r.signal&&{signal:r.signal})).then(e=>{if("Success"===e._tag)return e.value;if("Interrupt"===e.cause._tag)throw new nx;throw eW(e.cause)}),createUpload:async(n,r)=>{let a=new Map,s=nX({endpoint:String("function"==typeof n?n(t):n),package:e.package,url:nw(e?.url),headers:r.headers}),i=await nn(s("upload",{input:"input"in r?r.input:null,files:r.files.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))}).pipe(t$(nS,window.fetch))),o=r.files.reduce((e,t)=>e+t.size,0),u=0,c=(e,t)=>nK(e,t,{onUploadProgress:t=>{u+=t.delta,r.onUploadProgress?.({...t,file:e,progress:Math.round(t.loaded/e.size*100),totalLoaded:u,totalProgress:Math.round(u/o*100)})}}).pipe(t$(nS,window.fetch));for(let[e,t]of i.entries()){let n=r.files[e],s=nY();a.set(n,{deferred:s,presigned:t}),nt(c(n,t),{signal:s.ac.signal}).then(e=>{if("Success"===e._tag)return s.resolve(e.value);if("Interrupt"===e.cause._tag)throw new nm;throw eW(e.cause)}).catch(e=>{e instanceof nm||s.reject(e)})}return{pauseUpload:e=>{for(let t of eh(e??r.files)){let e=a.get(t);if(!e)return;if(e.deferred.ac.signal.aborted)throw new nx;e.deferred.ac.abort()}},resumeUpload:e=>{for(let t of eh(e??r.files)){let e=a.get(t);if(!e)throw"No upload found";e.deferred.ac=new AbortController,nt(c(t,e.presigned),{signal:e.deferred.ac.signal}).then(t=>{if("Success"===t._tag)return e.deferred.resolve(t.value);if("Interrupt"===t.cause._tag)throw new nm;throw eW(t.cause)}).catch(t=>{t instanceof nm||e.deferred.reject(t)})}},done:async e=>{let t=[];for(let n of eh(e??r.files)){let e=a.get(n);if(!e)throw"No upload found";t.push(e.deferred.promise)}let n=await Promise.all(t);return e?n[0]:n}}},routeRegistry:t}};var n1=n(58009),n2={uploadthing:"^7.2.0"};let n4=()=>void 0;function n3(e){let t=n1.useRef(n5);n4(()=>{t.current=e},[e]);let n=n1.useRef();return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function n5(){throw Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}let n6=(e,t)=>{let n=globalThis.__UPLOADTHING,{data:r}=function(e,t){(0,n1.useRef)({}),(0,n1.useRef)(!1);let n={error:void 0,data:void 0},[r,a]=(0,n1.useReducer)((e,t)=>{switch(t.type){case"loading":return{...n};case"fetched":return{...n,data:t.payload};case"error":return{...n,error:t.payload};default:return e}},n);return r}(n||e.href);return(n??r)?.find(e=>e.slug===t)?.config};function n7(e,t,n){let{uploadFiles:r,routeRegistry:a}=n0({url:e,package:"@uploadthing/react"}),[s,i]=(0,n1.useState)(!1),o=(0,n1.useRef)(0),u=(0,n1.useRef)(new Map);return{startUpload:n3(async(...e)=>{let a=await n?.onBeforeUploadBegin?.(e[0])??e[0],s=e[1];i(!0),a.forEach(e=>u.current.set(e,0)),n?.onUploadProgress?.(0);try{let e=await r(t,{signal:n?.signal,headers:n?.headers,files:a,onUploadProgress:e=>{if(!n?.onUploadProgress)return;u.current.set(e.file,e.progress);let t=0;u.current.forEach(e=>{t+=e});let r=10*Math.floor(t/u.current.size/10);r!==o.current&&(n?.onUploadProgress?.(r),o.current=r)},onUploadBegin({file:e}){n?.onUploadBegin&&n.onUploadBegin(e)},input:s});return await n?.onClientUploadComplete?.(e),e}catch(t){let e;if(t instanceof nx)throw t;t instanceof nk?e=t:console.error("Something went wrong. Please contact UploadThing and provide the following cause:",(e=nE(t)).cause instanceof Error?e.cause.toString():e.cause),await n?.onUploadError?.(e)}finally{i(!1),u.current=new Map,o.current=0}}),isUploading:s,routeConfig:n6(e,function(e,...t){return"function"==typeof e?e(...t):e}(t,a))}}let n8=e=>{let t=n3(e);(0,n1.useEffect)(()=>(window.addEventListener("paste",t),()=>{window.removeEventListener("paste",t)}),[t])};function n9(){return(0,a.jsx)("svg",{className:"z-10 block h-5 w-5 animate-spin align-middle text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 576 512",children:(0,a.jsx)("path",{fill:"currentColor",d:"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z"})})}function re({className:e,cn:t,...n}){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:t("fill-none stroke-current stroke-2",e),...n,children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"m4.9 4.9 14.2 14.2"})]})}let rt={0:"after:w-0",10:"after:w-[10%]",20:"after:w-[20%]",30:"after:w-[30%]",40:"after:w-[40%]",50:"after:w-[50%]",60:"after:w-[60%]",70:"after:w-[70%]",80:"after:w-[80%]",90:"after:w-[90%]",100:"after:w-[100%]"};function rn(e){let{mode:t="auto",appendOnPaste:n=!1,cn:r=nz}=e.config??{},s=(0,n1.useRef)(new AbortController),i=(0,n1.useRef)(null),[o,u]=(0,n1.useState)(e.__internal_upload_progress??0),[c,l]=(0,n1.useState)([]),{startUpload:d,isUploading:p,routeConfig:f}=n7(nw(e.url),e.endpoint,{signal:s.current.signal,headers:e.headers,onClientUploadComplete:t=>{i.current&&(i.current.value=""),l([]),e.onClientUploadComplete?.(t),u(0)},onUploadProgress:t=>{u(t),e.onUploadProgress?.(t)},onUploadError:e.onUploadError,onUploadBegin:e.onUploadBegin,onBeforeUploadBegin:e.onBeforeUploadBegin}),{fileTypes:h,multiple:g}=nT(f),m=!!(e.__internal_button_disabled??e.disabled),x=(()=>{let t="ready"===e.__internal_state||h.length>0;return e.__internal_state?e.__internal_state:m?"disabled":t?t&&!p?"ready":"uploading":"readying"})(),v=(0,n1.useCallback)(t=>{d(t,"input"in e?e.input:void 0).catch(t=>{if(t instanceof nx)e.onUploadAborted?.();else throw t})},[e,d]),b=(0,n1.useMemo)(()=>({type:"file",ref:i,multiple:g,accept:nR(h).join(", "),onChange:n=>{if(!n.target.files)return;let r=Array.from(n.target.files);if(e.onChange?.(r),"manual"===t){l(r);return}v(r)},disabled:m,tabIndex:m?-1:0}),[e,m,h,t,g,v]);n8(r=>{if(!n||document.activeElement!==i.current)return;let a=nN(r);if(!a)return;let s=a;l(t=>(s=[...t,...a],e.onChange?.(s),s)),"auto"===t&&v(c)});let y=(0,n1.useMemo)(()=>({ready:"readying"!==x,isUploading:"uploading"===x,uploadProgress:o,fileTypes:h,files:c}),[h,c,x,o]);return(0,a.jsxs)("div",{className:r("flex flex-col items-center justify-center gap-1",e.className,nF(e.appearance?.container,y)),style:nL(e.appearance?.container,y),"data-state":x,children:[(0,a.jsxs)("label",{className:r("group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled"===x&&"cursor-not-allowed bg-blue-400","readying"===x&&"cursor-not-allowed bg-blue-400","uploading"===x&&`bg-blue-400 after:absolute after:left-0 after:h-full after:bg-blue-600 after:content-[''] ${rt[o]}`,"ready"===x&&"bg-blue-600",nF(e.appearance?.button,y)),style:nL(e.appearance?.button,y),"data-state":x,"data-ut-element":"button",onClick:e=>{if("uploading"===x){e.preventDefault(),e.stopPropagation(),s.current.abort(),s.current=new AbortController;return}"manual"===t&&c.length>0&&(e.preventDefault(),e.stopPropagation(),v(c))},children:[(0,a.jsx)("input",{...b,className:"sr-only"}),(()=>{let n=n$(e.content?.button,y);if(n)return n;switch(x){case"readying":return"Loading...";case"uploading":if(o>=100)return(0,a.jsx)(n9,{});return(0,a.jsxs)("span",{className:"z-50",children:[(0,a.jsxs)("span",{className:"block group-hover:hidden",children:[o,"%"]}),(0,a.jsx)(re,{cn:r,className:"hidden size-4 group-hover:block"})]});default:if("manual"===t&&c.length>0)return`Upload ${c.length} file${1===c.length?"":"s"}`;return`Choose File${b.multiple?"(s)":""}`}})()]}),"manual"===t&&c.length>0?(0,a.jsx)("button",{onClick:()=>{l([]),i.current&&(i.current.value=""),e.onChange?.([])},className:r("h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600",nF(e.appearance?.clearBtn,y)),style:nL(e.appearance?.clearBtn,y),"data-state":x,"data-ut-element":"clear-btn",children:n$(e.content?.clearBtn,y)??"Clear"}):(0,a.jsx)("div",{className:r("h-[1.25rem] text-xs leading-5 text-gray-600",nF(e.appearance?.allowedContent,y)),style:nL(e.appearance?.allowedContent,y),"data-state":x,"data-ut-element":"allowed-content",children:n$(e.content?.allowedContent,y)??nM(f)})]})}var rr=n(97412),ra=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function rs(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=ra.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var ri=[".DS_Store","Thumbs.db"];function ro(e){return(0,rr.sH)(this,void 0,void 0,function(){return(0,rr.YH)(this,function(t){return ru(e)&&ru(e.dataTransfer)?[2,function(e,t){return(0,rr.sH)(this,void 0,void 0,function(){var n;return(0,rr.YH)(this,function(r){switch(r.label){case 0:if(!e.items)return[3,2];if(n=rl(e.items).filter(function(e){return"file"===e.kind}),"drop"!==t)return[2,n];return[4,Promise.all(n.map(rd))];case 1:return[2,rc(function e(t){return t.reduce(function(t,n){return(0,rr.fX)((0,rr.fX)([],(0,rr.zs)(t),!1),(0,rr.zs)(Array.isArray(n)?e(n):[n]),!1)},[])}(r.sent()))];case 2:return[2,rc(rl(e.files).map(function(e){return rs(e)}))]}})})}(e.dataTransfer,e.type)]:ru(e)&&ru(e.target)?[2,rl(e.target.files).map(function(e){return rs(e)})]:Array.isArray(e)&&e.every(function(e){return"getFile"in e&&"function"==typeof e.getFile})?[2,function(e){return(0,rr.sH)(this,void 0,void 0,function(){return(0,rr.YH)(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return e.getFile()}))];case 1:return[2,t.sent().map(function(e){return rs(e)})]}})})}(e)]:[2,[]]})})}function ru(e){return"object"==typeof e&&null!==e}function rc(e){return e.filter(function(e){return -1===ri.indexOf(e.name)})}function rl(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function rd(e){if("function"!=typeof e.webkitGetAsEntry)return rp(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?rh(t):rp(e)}function rp(e){var t=e.getAsFile();return t?Promise.resolve(rs(t)):Promise.reject("".concat(e," is not a File"))}function rf(e){return(0,rr.sH)(this,void 0,void 0,function(){return(0,rr.YH)(this,function(t){return[2,e.isDirectory?rh(e):function(e){return(0,rr.sH)(this,void 0,void 0,function(){return(0,rr.YH)(this,function(t){return[2,new Promise(function(t,n){e.file(function(n){t(rs(n,e.fullPath))},function(e){n(e)})})]})})}(e)]})})}function rh(e){var t=e.createReader();return new Promise(function(e,n){var r=[];!function a(){var s=this;t.readEntries(function(t){return(0,rr.sH)(s,void 0,void 0,function(){var s;return(0,rr.YH)(this,function(i){switch(i.label){case 0:if(t.length)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return e(i.sent()),[3,4];case 3:return n(i.sent()),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(rf)),r.push(s),a(),i.label=6;case 6:return[2]}})})},function(e){n(e)})}()})}function rg(e){let{mode:t="manual",appendOnPaste:n=!1,cn:r=nz}=e.config??{},s=(0,n1.useRef)(new AbortController),[i,o]=(0,n1.useState)([]),[u,c]=(0,n1.useState)(e.__internal_upload_progress??0),{startUpload:l,isUploading:d,routeConfig:p}=n7(nw(e.url),e.endpoint,{signal:s.current.signal,headers:e.headers,onClientUploadComplete:t=>{o([]),e.onClientUploadComplete?.(t),c(0)},onUploadProgress:t=>{c(t),e.onUploadProgress?.(t)},onUploadError:e.onUploadError,onUploadBegin:e.onUploadBegin,onBeforeUploadBegin:e.onBeforeUploadBegin}),{fileTypes:f,multiple:h}=nT(p),g=!!(e.__internal_dropzone_disabled??e.disabled),m=(()=>{let t=e.__internal_ready??("ready"===e.__internal_state||f.length>0);return e.__internal_state?e.__internal_state:g?"disabled":t?t&&!d?"ready":"uploading":"readying"})(),x=(0,n1.useCallback)(t=>{l(t,"input"in e?e.input:void 0).catch(t=>{if(t instanceof nx)e.onUploadAborted?.();else throw t})},[e,l]),{getRootProps:v,getInputProps:b,isDragActive:y,rootRef:w}=function({accept:e,disabled:t=!1,maxSize:n=Number.POSITIVE_INFINITY,minSize:r=0,multiple:a=!0,maxFiles:s=0,onDrop:i}){let o=(0,n1.useMemo)(()=>(function(e){if(nP(e))return Object.entries(e).reduce((e,[t,n])=>[...e,t,...n],[]).filter(e=>"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)||/^.*\.[\w]+$/.test(e)).join(",")})(e),[e]),u=(0,n1.useRef)(null),c=(0,n1.useRef)(null),l=(0,n1.useRef)([]),[d,p]=(0,n1.useReducer)(nq,nV),f=(0,n1.useCallback)(e=>{e.preventDefault(),e.persist(),l.current=[...l.current,e.target],nJ(e)&&Promise.resolve(ro(e)).then(t=>{if(e.isPropagationStopped())return;let i=t.length,u=i>0&&function({files:e,accept:t,minSize:n,maxSize:r,multiple:a,maxFiles:s}){return!!nH(e,a,s)&&e.every(e=>nD(e,t)&&nB(e,n,r))}({files:t,accept:o,minSize:r,maxSize:n,multiple:a,maxFiles:s});p({type:"setDraggedFiles",payload:{isDragAccept:u,isDragReject:i>0&&!u,isDragActive:!0}})}).catch(n_)},[o,s,n,r,a]),h=(0,n1.useCallback)(e=>{if(e.preventDefault(),e.persist(),nJ(e)&&null!==e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch{}return!1},[]),g=(0,n1.useCallback)(e=>{e.preventDefault(),e.persist();let t=l.current.filter(e=>u.current?.contains(e)),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),l.current=t,t.length>0||p({type:"setDraggedFiles",payload:{isDragActive:!1,isDragAccept:!1,isDragReject:!1}})},[]),m=(0,n1.useCallback)(e=>{let t=[];e.forEach(e=>{let a=nD(e,o),s=nB(e,r,n);a&&s&&t.push(e)}),nH(t,a,s)||t.splice(0),p({type:"setFiles",payload:{acceptedFiles:t}}),i(t)},[o,s,n,r,a,i]),x=(0,n1.useCallback)(e=>{e.preventDefault(),e.persist(),l.current=[],nJ(e)&&Promise.resolve(ro(e)).then(t=>{e.isPropagationStopped()||m(t)}).catch(n_),p({type:"reset"})},[m]),v=(0,n1.useCallback)(()=>{c.current&&(p({type:"openDialog"}),c.current.value="",c.current.click())},[]),b=(0,n1.useCallback)(e=>{u.current?.isEqualNode(e.target)&&("key"in e&&(" "===e.key||"Enter"===e.key)||"keyCode"in e&&(32===e.keyCode||13===e.keyCode))&&(e.preventDefault(),v())},[v]),y=(0,n1.useCallback)(e=>{e.stopPropagation(),d.isFileDialogActive&&e.preventDefault()},[d.isFileDialogActive]),w=(0,n1.useCallback)(()=>p({type:"focus"}),[]),_=(0,n1.useCallback)(()=>p({type:"blur"}),[]),j=(0,n1.useCallback)(()=>{(function(e=window.navigator.userAgent){return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1})()?setTimeout(v,0):v()},[v]),k=(0,n1.useMemo)(()=>()=>({ref:u,role:"presentation",...t?{}:{tabIndex:0,onKeyDown:b,onFocus:w,onBlur:_,onClick:j,onDragEnter:f,onDragOver:h,onDragLeave:g,onDrop:x}}),[t,_,j,f,g,h,x,w,b]),E=(0,n1.useMemo)(()=>()=>({ref:c,type:"file",style:{display:"none"},accept:o,multiple:a,tabIndex:-1,...t?{}:{onChange:x,onClick:y}}),[o,a,x,y,t]);return{...d,getRootProps:k,getInputProps:E,rootRef:u}}({onDrop:(0,n1.useCallback)(n=>{e.onDrop?.(n),e.onChange?.(n),o(n),"auto"===t&&x(n)},[e,t,x]),multiple:h,accept:f?nA(f):void 0,disabled:g});n8(r=>{if(!n||document.activeElement!==w.current)return;let a=nN(r);if(!a?.length)return;let s=a;o(t=>(s=[...t,...a],e.onChange?.(s),s)),e.onChange?.(s),"auto"===t&&x(s)});let _=(0,n1.useMemo)(()=>({ready:"readying"!==m,isUploading:"uploading"===m,uploadProgress:u,fileTypes:f,files:i,isDragActive:y}),[f,i,m,u,y]);return(0,a.jsxs)("div",{className:r("mt-2 flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 text-center",y&&"bg-blue-600/10",e.className,nF(e.appearance?.container,_)),...v(),style:nL(e.appearance?.container,_),"data-state":m,children:[n$(e.content?.uploadIcon,_)??(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",className:r("mx-auto block h-12 w-12 align-middle text-gray-400",nF(e.appearance?.uploadIcon,_)),style:nL(e.appearance?.uploadIcon,_),"data-ut-element":"upload-icon","data-state":m,children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.5 17a4.5 4.5 0 0 1-1.44-8.765a4.5 4.5 0 0 1 8.302-3.046a3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm3.75-2.75a.75.75 0 0 0 1.5 0V9.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0l-3.25 3.5a.75.75 0 1 0 1.1 1.02l1.95-2.1v4.59Z",clipRule:"evenodd"})}),(0,a.jsxs)("label",{className:r("relative mt-4 flex w-64 cursor-pointer items-center justify-center text-sm font-semibold leading-6 text-gray-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 hover:text-blue-500","ready"===m?"text-blue-600":"text-gray-500",nF(e.appearance?.label,_)),style:nL(e.appearance?.label,_),"data-ut-element":"label","data-state":m,children:[(0,a.jsx)("input",{className:"sr-only",...b()}),n$(e.content?.label,_)??("ready"===m?`Choose ${h?"file(s)":"a file"} or drag and drop`:"Loading...")]}),(0,a.jsx)("div",{className:r("m-0 h-[1.25rem] text-xs leading-5 text-gray-600",nF(e.appearance?.allowedContent,_)),style:nL(e.appearance?.allowedContent,_),"data-ut-element":"allowed-content","data-state":m,children:n$(e.content?.allowedContent,_)??nM(p)}),(0,a.jsx)("button",{className:r("group relative mt-4 flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md border-none text-base text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled"===m&&"cursor-not-allowed bg-blue-400","readying"===m&&"cursor-not-allowed bg-blue-400","uploading"===m&&`bg-blue-400 after:absolute after:left-0 after:h-full after:bg-blue-600 after:content-[''] ${rt[u]}`,"ready"===m&&"bg-blue-600","disabled:pointer-events-none",nF(e.appearance?.button,_)),style:nL(e.appearance?.button,_),onClick:e=>{if("uploading"===m){e.preventDefault(),e.stopPropagation(),s.current.abort(),s.current=new AbortController;return}"manual"===t&&i.length>0&&(e.preventDefault(),e.stopPropagation(),x(i))},"data-ut-element":"button","data-state":m,type:"button",disabled:0===i.length||"disabled"===m,children:(()=>{let n=n$(e.content?.button,_);if(n)return n;switch(m){case"readying":return"Loading...";case"uploading":if(u>=100)return(0,a.jsx)(n9,{});return(0,a.jsxs)("span",{className:"z-50",children:[(0,a.jsxs)("span",{className:"block group-hover:hidden",children:[u,"%"]}),(0,a.jsx)(re,{cn:r,className:"hidden size-4 group-hover:block"})]});default:if("manual"===t&&i.length>0)return`Upload ${i.length} file${1===i.length?"":"s"}`;return`Choose File${h?"(s)":""}`}})()})]})}let rm=e=>{nb("@uploadthing/react",n2.uploadthing,nW);let t=nw(e?.url);return e=>(0,a.jsx)(rn,{...e,url:t})},rx=e=>{nb("@uploadthing/react",n2.uploadthing,nW);let t=nw(e?.url);return e=>(0,a.jsx)(rg,{...e,url:t})}}};