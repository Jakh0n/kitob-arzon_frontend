(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6056],{67522:(e,a,s)=>{Promise.resolve().then(s.bind(s,88780)),Promise.resolve().then(s.bind(s,89282)),Promise.resolve().then(s.t.bind(s,48173,23))},88780:(e,a,s)=>{"use strict";s.d(a,{default:()=>I});var t=s(95155),l=s(12115),r=s(85217),n=s(51719),i=s(29602);let d=r.bL,o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.q7,{ref:a,className:(0,i.cn)("border-b",s),...l})});o.displayName="AccordionItem";let c=l.forwardRef((e,a)=>{let{className:s,children:l,...d}=e;return(0,t.jsx)(r.Y9,{className:"flex",children:(0,t.jsxs)(r.l9,{ref:a,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",s),...d,children:[l,(0,t.jsx)(n.A,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=r.l9.displayName;let m=l.forwardRef((e,a)=>{let{className:s,children:l,...n}=e;return(0,t.jsx)(r.UC,{ref:a,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,t.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",s),children:l})})});m.displayName=r.UC.displayName;var u=s(63898),x=s(14085),f=s(66217),p=s(40767);let h=f.bL,j=f.l9,N=f.ZL;f.bm;let v=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(f.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});v.displayName=f.hJ.displayName;let b=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(N,{children:[(0,t.jsx)(v,{}),(0,t.jsxs)(f.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,t.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});b.displayName=f.UC.displayName;let y=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};y.displayName="DialogHeader";let g=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(f.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});g.displayName=f.hE.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(f.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})}).displayName=f.VY.displayName;var w=s(77594),S=s(73580),E=s(90068),R=s(34839),V=s(9955),C=s(15785),A=s(26036),k=s(20241),z=s(68041),O=s(85060),U=s(2615),F=s(69606);let P=e=>{let{user:a}=e,{isLoading:s,onError:l,setIsLoading:r}=(0,A.A)(),{update:n}=(0,U.useSession)(),i=(0,F.mN)({resolver:(0,O.u)(z.Qv),defaultValues:{fullName:a.fullName}});async function d(e){r(!0);let a=await (0,E.T)(e);return(null==a?void 0:a.serverError)||(null==a?void 0:a.validationErrors)||!(null==a?void 0:a.data)?l("Something went wrong"):a.data.failure?l(a.data.failure):void(200===a.data.status&&((0,k.oR)({description:"Full name updated successfully"}),n(),r(!1)))}return(0,t.jsx)(R.lV,{...i,children:(0,t.jsxs)("form",{onSubmit:i.handleSubmit(d),className:"space-y-2",children:[(0,t.jsx)(R.zB,{control:i.control,name:"fullName",render:e=>{let{field:a}=e;return(0,t.jsxs)(R.eI,{className:"space-y-0",children:[(0,t.jsx)(C.J,{className:"text-xs",children:"Full Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(V.p,{placeholder:"Osman Ali",className:"bg-white",...a,disabled:s})}),(0,t.jsx)(R.C5,{className:"text-xs text-red-500"})]})}}),(0,t.jsxs)(x.$,{type:"submit",className:"self-end mb-0.5",size:"sm",disabled:s,children:["Submit ",s&&(0,t.jsx)(w.A,{className:"w-4 h-4 animate-spin"})]})]})})};var J=s(76853),T=s(82524),_=s(37843);let L=e=>{let{user:a}=e,[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),{isLoading:d,setIsLoading:o,onError:c}=(0,A.A)(),m=(0,F.mN)({resolver:(0,O.u)(z.y4),defaultValues:{email:a.email}}),u=(0,F.mN)({resolver:(0,O.u)(z.b9),defaultValues:{otp:""}});async function f(e){o(!0);let a=await (0,J.I)({email:e.email});return(null==a?void 0:a.serverError)||(null==a?void 0:a.validationErrors)||!(null==a?void 0:a.data)?c("Something went wrong"):a.data.failure?c(a.data.failure):void(200===a.data.status&&((0,k.oR)({description:"OTP sent successfully"}),i(!0),o(!1),r(!1)))}async function p(e){o(!0);let a=await (0,T.R)({otp:e.otp,email:m.getValues("email")});if((null==a?void 0:a.serverError)||(null==a?void 0:a.validationErrors)||!(null==a?void 0:a.data))return c("Something went wrong");if(a.data.failure)return c(a.data.failure);if(301===a.data.status&&(r(!0),o(!1),(0,k.oR)({description:"OTP was expired. Please resend OTP"})),200===a.data.status){let e=await (0,E.T)({email:m.getValues("email")});if((null==e?void 0:e.serverError)||(null==e?void 0:e.validationErrors)||!(null==e?void 0:e.data))return c("Something went wrong");if(e.data.failure)return c(e.data.failure);200===e.data.status&&((0,k.oR)({description:"Email updated successfully"}),(0,U.signOut)({callbackUrl:"/sign-in"}))}}return(0,t.jsxs)(R.lV,{...m,children:[(0,t.jsxs)("form",{onSubmit:m.handleSubmit(f),className:"space-y-2",children:[(0,t.jsx)(R.zB,{control:m.control,name:"email",render:e=>{let{field:a}=e;return(0,t.jsxs)(R.eI,{className:"space-y-0",children:[(0,t.jsx)(C.J,{className:"text-xs",children:"Email"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(V.p,{placeholder:"example@gmail.com",className:"bg-white",...a})}),(0,t.jsx)(R.C5,{className:"text-xs text-red-500"})]})}}),!n&&(0,t.jsxs)(x.$,{type:"submit",disabled:d,children:["Submit ",d&&(0,t.jsx)(w.A,{className:"animate-spin"})]})]}),n&&(0,t.jsx)(R.lV,{...u,children:(0,t.jsxs)("form",{onSubmit:u.handleSubmit(p),className:"space-y-2 mt-2",children:[(0,t.jsx)(R.zB,{control:u.control,name:"otp",render:e=>{let{field:a}=e;return(0,t.jsxs)(R.eI,{className:"space-y-0 w-full",children:[(0,t.jsx)(C.J,{children:"Enter OTP"}),(0,t.jsx)(R.MJ,{children:(0,t.jsxs)(_.UV,{maxLength:6,...a,children:[(0,t.jsxs)(_.NV,{children:[(0,t.jsx)(_.sF,{index:0}),(0,t.jsx)(_.sF,{index:1}),(0,t.jsx)(_.sF,{index:2})]}),(0,t.jsx)(_.pf,{}),(0,t.jsxs)(_.NV,{children:[(0,t.jsx)(_.sF,{index:3}),(0,t.jsx)(_.sF,{index:4}),(0,t.jsx)(_.sF,{index:5})]})]})}),(0,t.jsx)(R.C5,{className:"text-xs text-red-500"})]})}}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(x.$,{type:"submit",disabled:d||s,children:["Verify ",d&&(0,t.jsx)(w.A,{className:"animate-spin"})]}),s&&(0,t.jsxs)(x.$,{type:"button",onClick:()=>f(m.getValues()),disabled:d,children:["Resend OTP ",d&&(0,t.jsx)(w.A,{className:"animate-spin"})]})]})]})})]})};var q=s(30868);function B(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",a),...s})}let I=e=>{let{user:a}=e;(0,F.mN)({resolver:(0,O.u)(z.q8),defaultValues:{avatar:a.avatar,avatarKey:a.avatarKey}});let[s,r]=(0,l.useState)(!1),{update:n}=(0,U.useSession)(),{isLoading:i,onError:f,setIsLoading:p}=(0,A.A)(),N=async(e,a)=>{p(!0);let s=await (0,E.T)({avatar:e,avatarKey:a});return(null==s?void 0:s.serverError)||(null==s?void 0:s.validationErrors)||!(null==s?void 0:s.data)?f("Something went wrong"):s.data.failure?f(s.data.failure):void(200===s.data.status&&((0,k.oR)({description:"Avatar updated successfully"}),n(),r(!1),p(!1)))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full h-52 bg-secondary flex justify-center items-center",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(u.eu,{className:"size-32",children:[i&&(0,t.jsx)(B,{className:"inset-0 absolute bg-background z-50 opacity-15 flex items-center justify-center",children:(0,t.jsx)(w.A,{className:"animate-spin "})}),(0,t.jsx)(u.BK,{src:a.avatar,alt:a.avatarKey}),(0,t.jsx)(u.q5,{className:"bg-primary text-white text-6xl",children:a.fullName.charAt(0).toUpperCase()})]}),(0,t.jsxs)(h,{open:s,onOpenChange:r,children:[(0,t.jsx)(j,{asChild:!0,children:(0,t.jsx)(x.$,{size:"icon",className:"absolute right-0 bottom-0 rounded-full border border-primary",variant:"secondary",children:(0,t.jsx)(S.A,{})})}),(0,t.jsxs)(b,{children:[(0,t.jsx)(y,{children:(0,t.jsx)(g,{})}),(0,t.jsx)(q.Z,{endpoint:"imageUploader",config:{appendOnPaste:!0,mode:"auto"},appearance:{container:{height:200,padding:10}},onClientUploadComplete:e=>N(e[0].url,e[0].key)})]})]})]})}),(0,t.jsx)("div",{className:"my-3 bg-secondary px-4",children:(0,t.jsxs)(d,{type:"single",collapsible:!0,children:[(0,t.jsxs)(o,{value:"item-1",children:[(0,t.jsx)(c,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-0",children:[(0,t.jsx)("h2",{className:"font-bold",children:"Full Name"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:a.fullName})]})}),(0,t.jsx)(m,{className:"border-l border-l-primary pl-4",children:(0,t.jsx)(P,{user:a})})]}),(0,t.jsxs)(o,{value:"item-2",children:[(0,t.jsx)(c,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-0",children:[(0,t.jsx)("h2",{className:"font-bold",children:"Email"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:a.email})]})}),(0,t.jsx)(m,{className:"border-l border-l-primary pl-4",children:(0,t.jsx)(L,{user:a})})]})]})})]})}},63898:(e,a,s)=>{"use strict";s.d(a,{BK:()=>d,eu:()=>i,q5:()=>o});var t=s(95155),l=s(12115),r=s(74920),n=s(29602);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.bL,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});i.displayName=r.bL.displayName;let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r._V,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",s),...l})});d.displayName=r._V.displayName;let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.H4,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l})});o.displayName=r.H4.displayName},30868:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(62656);(0,t.Jt)();let l=(0,t.Wi)()},90068:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var t=s(75828);let l=(0,t.createServerReference)("7fdac8944a94b64f493b8bcfef6f8f7f142a23674a",t.callServer,void 0,t.findSourceMapURL,"updateUser")}},e=>{var a=a=>e(e.s=a);e.O(0,[3286,12,481,8173,6217,7518,3370,5612,3050,8441,1517,7358],()=>a(67522)),_N_E=e.O()}]);